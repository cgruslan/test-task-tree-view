!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const r="SET_ITEMS",i="TOGGLE_ITEM",s="SELECT_ITEM";var c=(e=[],t)=>{switch(t.type){case r:return[...t.items];case i:return e.map(e=>e.id!==t.id?e:{...e,collapsed:!e.collapsed});default:return e}},o=(e=null,t)=>{switch(t.type){case s:return t.id;default:return e}},a=function(e,t={}){let n=t,r=[];function i(t){n=e(n,t),r.forEach(e=>e())}return i({}),{getState:function(){return n},dispatch:i,subscribe:function(e){return r.push(e),function(){r=r.filter(t=>t!==e)}}}}(function(e={},t){return{items:c(e.items,t),selectedItemId:o(e.selectedItemId,t)}});var l=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(t=>this[t]=((...n)=>e[t](...n)))}};var u=function(e,t={}){return Object.keys(t).reduce((e,n)=>t[n]?[...e,n]:e,[e]).join(" ")};var d=function(){return function({name:e,id:t,collapsed:n,level:r}){const{items:i,selectedItemId:s}=a.getState(),c=i.some(e=>e.parentId===t),o=u("trv-item__meta js-select-item",{"trv-item__meta_selected":t===s}),l=`padding-left: ${10+18*r}px`,d=u("trv-item__toggle js-toggle-item",{"trv-item__toggle_on":!n,"trv-item__toggle_hidden":!c}),p=u("trv-item__icon",{"trv-item__icon_open":!n});return`\n      <li class="trv-item" data-id="${t}">\n        <span class="${o}" style="${l}">\n          <i class="${d}"></i>\n          <i class="${p}"></i>\n          <span class="trv-item__name">${e}</span>\n        </span>\n        ${c&&!n?f({parentId:t,level:r+1}):""}\n      </li>\n    `}}();var f=function(){function e({parentId:e="0",level:t=0}={}){const{items:n}=a.getState();return`\n      <ul class="trv-list">\n        ${n.filter(t=>t.parentId===e).map(e=>d({...e,level:t})).join("")}\n      </ul>\n    `}return e.toString=e,e}();window.TreeView=class extends l{constructor(e,t){let n;if("string"==typeof e)n=document.querySelector(e);else{if(!(e instanceof Element))throw new Error("Container is required");n=e}super(),this.containerEl=n,this.containerEl.classList.add("trv-root"),this.containerEl.addEventListener("click",this.handleClick.bind(this)),t=t.map(e=>({...e,collapsed:!0})),a.dispatch({type:r,items:t}),a.subscribe(this.render.bind(this)),this.render()}render(){this.containerEl.innerHTML=f}handleClick(e){const t=e.target.closest(".trv-item");if(!t)return;const{id:n}=t.dataset;if(e.target.classList.contains("js-toggle-item"))return a.dispatch({type:i,id:n});if(a.getState().selectedItemId!==n&&e.target.closest(".js-select-item")){a.dispatch({type:s,id:n});const e=new Event("select");e.id=n,this.dispatchEvent(e)}}}}]);